{"version":3,"sources":["relax.gif","components/Line.js","components/Lines.js","components/Button.js","components/CancelContinueButtons.js","components/CurrentWord.js","components/Title.js","components/PoemBuilder.js","components/MiniPoem.js","components/History.js","components/NavBar.js","components/WordBank.js","components/SelfDestruct.js","components/Help.js","components/Game.js","index.js"],"names":["module","exports","Line","props","lineRef","useRef","useEffect","index","currentLine","current","focus","className","lineValid","ref","key","contentEditable","suppressContentEditableWarning","onChange","e","handleLineChange","onKeyDown","handleKeyDown","onClick","handleClick","placeholder","placeholderLine","value","line","syllableCount","syllableLimit","Lines","lines","placeholders","exampleHaiku","length","map","i","syllableCounts","syllableLimits","Button","buttonStyle","CancelContinueButtons","handleContinue","continueText","handleCancel","cancelText","CurrentWord","currentWord","currentWordExists","activeEditExists","activeEdit","syllables","text","onMouseEnter","viewOriginalWord","onMouseLeave","edited","displayOriginalWord","original","definition","handleCurrentWordReset","handleSyllableChange","disabled","displaySyllableUpdate","continueSyllableUpdate","cancelSyllableUpdate","handleDefinitionChange","displayDefinitionUpdate","continueDefinitionUpdate","cancelDefinitionUpdate","displayWordResetButton","handleResetClick","Title","title","handleTitleChange","target","currentPoemIndex","PoemBuilder","poem","linesEdit","valid","poemIsEmpty","reduce","entirePoemIsEmpty","handleSavePoem","handleResetPoem","criteria","autoresize","handleCurrentWordChange","console","log","MiniPoem","mapping","History","history","JSON","stringify","isCurrentPoem","togglePoemHistory","NavBar","buttons","selectedButton","displayHistory","item","name","WordBank","words","items","word","SelfDestruct","src","relax","alt","Help","url_base","Game","toggleUser","user_id","setState","user","addWordToMap","next","Map","state","undefined","get","lookupWord","wordObject","set","toggleView","view","activeView","views","newDisplay","display","getCurrentPoem","splice","find","newTitle","createPoem","url","fetch","method","body","headers","then","res","json","catch","err","handlePoemClick","lineNumber","window","getSelection","modify","cursorStart","selectionStart","cursorEnd","selectionEnd","sel","isCollapsed","toString","setSelectionRange","updateCurrentWord","handlePoemKeyDown","preventDefault","lineCount","handlePoemLineChange","slice","split","currentPoem","currentLines","createLines","getSyllableCount","validatePoem","Array","fill","edit","definitionUpdate","syllableUpdate","parseInt","handleStart","newPoem","poemBuilder","nextArgs","renderViews","getView","push","incrementCounter","counter","count","num","fullTitle","id","type","viewStatus","originalWordWarning","continueUpdate","displayWarning","updateSyllables","updateDefinition","newSyllableCount","newDefinition","newWord","delete","cancelWarning","updateSyllableCounts","resetSyllables","resetDefinition","total","targetWord","filteredHistory","filter","wordBank","Object","keys","help","selfDestruct","users","example","this","response","React","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.19d10277.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/relax.8074cc44.gif\";","import React, { useRef, useEffect } from 'react'; \n\nconst Line = (props) => {\n\tconst lineRef = useRef(null);\n\tuseEffect(() => {\n\t\tif (props.index === props.currentLine) {\n\t\t\tlineRef.current.focus();\n\t\t}\n\t}, [props.index, props.currentLine]);\n\t\t\n\treturn (\n\t\t<span className={`line ${props.lineValid ? 'valid' : 'invalid'}`}>\n\t\t\t<textarea \n\t\t\tref={lineRef}\n\t\t\tkey={props.index} \n\t\t\tcontentEditable=\"true\" \n\t\t\tsuppressContentEditableWarning={true} //https://stackoverflow.com/questions/49639144/why-does-react-warn-against-an-contenteditable-component-having-children-managed\n\t\t\tonChange={(e) => props.handleLineChange(e, props.index)}\n\t\t\tonKeyDown={(e) => props.handleKeyDown(e, props.index)}\n\t\t\tonClick={(e) => props.handleClick(e, props.index)}\n\t\t\tplaceholder={props.placeholderLine}\n\t\t\tvalue={props.line ? props.line : \"\"}\n\t\t\t/>\n\t\t\t<h4 className=\"counter\"> {props.syllableCount} / {props.syllableLimit}</h4>\n\t\t</span>\n\t);\n};\n\nexport default Line; ","import React from 'react'; \nimport Line from './Line';\n\nconst Lines = (props) => { \n\tconst lines = props.lines; \n\tconst placeholders = {...props.exampleHaiku}; \n\t\t\t\n\treturn (\n\t\tlines && lines.length ? \n\t\t\tlines.map((line, i) => {\n\t\t\t\treturn (<Line \n\t\t\t\t\tclassName=\"line\"\n\t\t\t\t\tlineValid={props.syllableCounts[i] === props.syllableLimits[i] ? true : false}\n\t\t\t\t\tkey={i} \n\t\t\t\t\tline={line} \n\t\t\t\t\tplaceholderLine={placeholders[i]}\n\t\t\t\t\tcurrentLine={props.currentLine}\n\t\t\t\t\tsyllableLimit={props.syllableLimits[i]} \n\t\t\t\t\tsyllableCount={props.syllableCounts[i] ? props.syllableCounts[i]: 0}\n\t\t\t\t\tindex={i}\n\t\t\t\t\thandleKeyDown={props.handleKeyDown}\n\t\t\t\t\thandleClick={props.handleClick}\n\t\t\t\t\thandleLineChange={props.handleLineChange}\n\t\t\t\t/>);\n\t\t\t})\n\t\t: null\n\t);\n}\n\nexport default Lines; ","import React from 'react';\n\nconst Button = (props) => {\n\treturn <button onClick={props.handleClick} className={props.buttonStyle}>{props.value}</button>;\n};\n\nexport default Button; ","import React from 'react'; \nimport Button from './Button';\n\nconst CancelContinueButtons = (props) => {\n\treturn (\n\t\t<>\n\t\t\t<Button handleClick={props.handleContinue} buttonStyle=\"continue\" value={props.continueText || \"Continue\"}/>\n\t\t\t<Button handleClick={props.handleCancel} buttonStyle=\"cancel\" value={props.cancelText || \"Cancel\"}/>\n\t\t</>\n\t);\n}\n\nexport default CancelContinueButtons; ","import React from 'react';\nimport Button from './Button';\nimport CancelContinueButtons from './CancelContinueButtons';\nimport TextareaAutosize from 'react-textarea-autosize';\n\nconst CurrentWord = (props) => {\t\n\tconst { currentWord } = props;\t\n\tconst currentWordExists = (currentWord && 'text' in currentWord && 'syllables' in currentWord); \n\tconst activeEditExists = (currentWord && 'activeEdit' in currentWord && currentWord.activeEdit); \n\tif (!currentWordExists && !activeEditExists) { return null; }\n\tconst syllableCount = props.currentWord.syllables; \n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"currentWord\">\n\t\t\t\t<h1 className=\"currentWordDisplay\">\n\t\t\t\t{`${currentWordExists ? currentWord.text : ''}`}\n\t\t\t\t</h1>\n\t\t\t\t<span \n\t\t\t\t\tonMouseEnter={(e) => props.viewOriginalWord(true)}\n\t\t\t\t\tonMouseLeave={(e) => props.viewOriginalWord(false)}>\n\t\t\t\t{props.currentWord.edited ? \n\t\t\t\t\t\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\tclassName=\"asterisk\" \t\t\t\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t*\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t{props.displayOriginalWord ? \n\t\t\t\t\t<span className=\"originalWord\">\n\t\t\t\t\t\t<span> This word was edited (by you). Here is the original:</span>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<span>{currentWord.original ? currentWord.original.syllables : null} syllables</span>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<span>{currentWord.original ? currentWord.original.definition : null}</span>\n\t\t\t\t\t\t<Button value=\"Reset word to original\" handleClick={props.handleCurrentWordReset}></Button>\n\t\t\t\t\t</span>\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t</span>\n\t\t\t\n\t\t\t<span className=\"currentWordSyllables\">\n\t\t\t\t<TextareaAutosize \n\t\t\t\t\tclassName=\"currentWordSyllableCount\" \n\t\t\t\t\tonChange={(e) => props.handleSyllableChange(e)}\n\t\t\t\t\tvalue={syllableCount}\n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<textarea \n\t\t\t\t\tclassName=\"currentWordSyllableText\" \n\t\t\t\t\tdisabled \n\t\t\t\t\tvalue={` syllable${(syllableCount > 1 || syllableCount === 0) ? \"s\" : \"\"}`}\n\t\t\t\t/>\n\t\t\t</span>\n\t\t\t\n\t\t\t{props.displaySyllableUpdate ? \n\t\t\t<CancelContinueButtons \n\t\t\t\tcontinueText=\"Update syllable count\" \n\t\t\t\tcancelText=\"Cancel\" \n\t\t\t\thandleContinue={props.continueSyllableUpdate} \n\t\t\t\thandleCancel={props.cancelSyllableUpdate}\n\t\t\t/>\n\t\t\t: null}\n\t\t\t\t\n\t\t\t{currentWordExists && 'definition' in currentWord ? \n\t\t\t<TextareaAutosize \n\t\t\t\tclassName=\"currentDefinition autoresize\" \n\t\t\t\tvalue={currentWord.definition}\n\t\t\t\tonChange={(e) => {props.handleDefinitionChange(e)}}\n\t\t\t/> \n\t\t\t: null}\n\t\t\t\t\n\t\t\t{props.displayDefinitionUpdate ? \n\t\t\t<CancelContinueButtons\n\t\t\t\tcontinueText=\"Update definition\"\n\t\t\t\tcancelText=\"Cancel\"\n\t\t\t\thandleContinue={props.continueDefinitionUpdate}\n\t\t\t\thandleCancel={props.cancelDefinitionUpdate}\n\t\t\t/>\n\t\t\t: null}\n\t\t\t\n\t\t\t{props.displayWordResetButton ? \n\t\t\t<Button \n\t\t\t\thandleClick={props.handleResetClick} \n\t\t\t\tbuttonStyle=\"recycle\"\n\t\t\t\tvalue={`Reset syllable count & definition`}\n\t\t\t/>\n\t\t\t: null}\n\n\n\t\t\t</div>\n\t\t\t\n\t\t</>\n\t);\n};\n\nexport default CurrentWord; ","import React from 'react';\n\nconst Title = (props) => {\n\treturn (\n\t\t<div className=\"title\">\n\t\t\t<span><span className={'underline'}>title</span>\n\t\t\t:\n\t\t\t</span>\n\t\t\t<textarea \n\t\t\t\tclassName={'title'}\n\t\t\t\tvalue={props.title}\n\t\t\t\tonChange={(e) => props.handleTitleChange(e.target.value, props.currentPoemIndex)}\t\n\t\t\t\t/*cols={1}*/\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default Title; ","import React from 'react'; \nimport Lines from './Lines';\nimport CurrentWord from './CurrentWord';\nimport Button from './Button';\nimport Title from './Title';\n\nconst PoemBuilder = (props) => {\n\tconst poem = props.poem; \n\tif (!poem) { return null; }\n\tconst lines = poem.linesEdit ? poem.linesEdit : poem.lines;\n\tif (!lines) { console.log(`lines: ${lines}`); return; }\n\tconst valid = poem.valid;\n\tconst poemIsEmpty = lines.reduce((entirePoemIsEmpty, currentLine) => {\n\t\treturn !currentLine && entirePoemIsEmpty;  \n\t}, true);\n\t\n\treturn (\n\t\t<>\n\t\t\t<div className=\"poem\">\n\t\t\t\t\n\t\t\t\t{poem ? \n\t\t\t\t\t<>\n\n\t\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<Title\n\t\t\t\t\ttitle={poem ? poem.title : \"\"}\n\t\t\t\t\thandleTitleChange={props.handleTitleChange}\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t\t{ !poemIsEmpty ?   \t\t\t\t\t\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\thandleClick={props.handleSavePoem}\n\t\t\t\t\t\t\t\tvalue={\"Save & create new poem\"}/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\thandleClick={props.handleResetPoem}\n\t\t\t\t\t\t\t\tvalue={\"Reset\"}/>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t: null }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"lines\">\n\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\tlines={lines} \n\t\t\t\t\t\t\tsyllableLimits={props.criteria.syllableLimits}\n\t\t\t\t\t\t\tsyllableCounts={props.syllableCounts}\n\t\t\t\t\t\t\texampleHaiku={props.criteria.exampleHaiku}\n\t\t\t\t\t\t\tcurrentLine={props.currentLine}\n\t\t\t\t\t\t\thandleLineChange={props.handleLineChange}\n\t\t\t\t\t\t\thandleKeyDown={props.handleKeyDown}\n\t\t\t\t\t\t\thandleClick={props.handleClick}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<hr className=\"divider\"/>\n\t\t\t\t\t</div>\n\n\n\t\t\t\t\t</>\n\t\t\t\t: null }\n\n\t\t\t\t\n\n\n\t\t\t</div>\n\t\t\t\n\t\t\t{poem && !props.poemIsEmpty ? \n\t\t\t\t<>\n\t\t\t\t\t{valid ? \n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h1>This haiku is valid!</h1>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t: null}\n\t\t\t\t\t\n\t\t\t\t\t<CurrentWord \n\t\t\t\t\t\tcurrentWord={props.currentWord}\n\t\t\t\t\t\tdisplaySyllableUpdate={props.displaySyllableUpdate}\n\t\t\t\t\t\thandleSyllableChange={props.handleSyllableChange}\n\t\t\t\t\t\tcontinueSyllableUpdate={props.continueSyllableUpdate}\n\t\t\t\t\t\tcancelSyllableUpdate={props.cancelSyllableUpdate}\n\t\t\t\t\t\tautoresize={props.autoresize}\n\t\t\t\t\t\thandleResetClick={props.handleResetClick}\n\t\t\t\t\t\thandleCurrentWordChange={props.handleCurrentWordChange}\n\t\t\t\t\t\thandleDefinitionChange={props.handleDefinitionChange}\n\t\t\t\t\t\tcontinueDefinitionUpdate={props.continueDefinitionUpdate}\n\t\t\t\t\t\tcancelDefinitionUpdate={props.cancelDefinitionUpdate}\n\t\t\t\t\t\tdisplayDefinitionUpdate={props.displayDefinitionUpdate}\n\t\t\t\t\t\tviewOriginalWord={props.viewOriginalWord}\n\t\t\t\t\t\tdisplayOriginalWord={props.displayOriginalWord}\n\t\t\t\t\t\thandleCurrentWordReset={props.handleCurrentWordReset}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t\t\t\n\t\t\t: null}\t\t\t\t\n\t\t\t\n\t\t\t\n\t\t</>\n\t)\n};\n\nexport default PoemBuilder; ","import React from 'react'; \n\nconst MiniPoem = (props) => {\n\t\n\tconst mapping = (props.lines ? (props.lines.length ? \n\t\t(props.lines.map((line, index) => {\n\t\t\treturn (\n\t\t\t\t<span key={index}>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{line}\n\t\t\t\t\t</span>\n\t\t\t\t\t<br/>\n\t\t\t\t</span>\n\t\t\t);\n\t\t})) : null) : null)\t\n\t\n\treturn (props.lines && props.lines.length > 0 ? \n\t<span onClick={props.handleClick}>\n\t\t{mapping}\n\t</span> \n\t: null);\n\t\t\n\t\n\t\n\t\n};\n\nexport default MiniPoem;","import React, { Fragment } from 'react'; \nimport MiniPoem from './MiniPoem';\n\nconst History = (props) => {\n\tif (!props.history || !props.history.length) {\n\t\treturn null;\n\t}\n\tconst poem = [...props.history][props.currentPoemIndex];\n\tconst valid = poem ? poem.valid : false;\n\n\tconst lines = poem.linesEdit ? {...poem.linesEdit} : poem.lines;\n\n\treturn (\n\t\t<div className=\"history\">\n\t\t\t\t{props.history.length ? \n\t\t\t\tprops.history.map((poem, index) => {\n\t\t\t\t\tconsole.log(`poem: ${JSON.stringify(poem)}`);\n\t\t\t\t\tlet isCurrentPoem = (index === props.currentPoemIndex);\t\t\t\t\t\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<span key={index}>\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\tdisabled={isCurrentPoem}\n\t\t\t\t\t\t\t\t\tclassName=\"poemHistoryButton\" \n\t\t\t\t\t\t\t\t\tkey={index} \n\t\t\t\t\t\t\t\t\tonClick={(e) => props.togglePoemHistory(index)}>\n\t\t\t\t\t\t\t\t\t<h4><strong>{poem.title}</strong></h4>\n\t\t\t\t\t\t\t\t\t<br/>\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<MiniPoem\n\t\t\t\t\t\t\t\t\t\tlines={poem.linesEdit ? poem.linesEdit : poem.lines} \n\t\t\t\t\t\t\t\t\t\tclassName=\"miniPoem\" \n\t\t\t\t\t\t\t\t\t\tindex={index}/>\n\t\t\t\t\t\t\t\t\t{isCurrentPoem ? <span>*<sub>active poem</sub></span> : null}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t);\n\t\t\t\t}) \n\t\t\t\t: <div>No poems</div>}\n\t\t</div>\t\t\n\t);\n\t\t\n\t};\n\n\texport default History; ","import React from 'react'; \n\nconst NavBar = (props) => {\n\tconst { buttons, selectedButton, displayHistory } = props; \n\n\treturn (\n\t\t<div className=\"nav\">\n\t\t\t{buttons.map((item, i) => {\n\t\t\t\treturn <button \n\t\t\t\t\tclassName={(item.name === selectedButton || (item.name === \"history\" && displayHistory)) ? \"selected\" : null} \n\t\t\t\t\tkey={i} \n\t\t\t\t\tonClick={() => props.handleClick(item.name)}>\n\t\t\t\t\t{item.name ===\"history\" && displayHistory ? 'Hide ': ''}{item.text}\n\t\t\t\t</button>\n\t\t\t})}\n\t\t</div>\n\t);\n};\n\nexport default NavBar;","import React from 'react'; \n\nconst WordBank = (props) => {\n\tlet words = props.words; \n\tif (!words) { words = []; }\n\tconsole.log(`WordBank words: ${JSON.stringify(props.words)}`);\n\tconst items = words.map((word, i) => {\n\t\tconsole.log(`word: ${JSON.stringify(word)}`);\n\t\tif (!word) { return; }\n\t\treturn ( \n\t\t\t<li>\n\t\t\t\t<span>\n\t\t\t\t\t<h2>{word.text}</h2>\n\t\t\t\t\t<hr/>\n\t\t\t\t\t{word.syllables ? \n\t\t\t\t\t\t<p>{word.syllables} syllable{word.syllables > 1 ? \"s\" : null}</p>\n\t\t\t\t\t: <p> No syllable count </p>}\n\t\t\t\t\t<p>{word.definition}</p>\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t);\n\t});\n\n\tconsole.log(`items: ${items}`); \n\n\treturn (\n\t\t<ul>\n\t\t\t{items}\n\t\t</ul>\n\t);\n};\n\nexport default WordBank; ","import React from 'react'; \nimport relax from '../relax.gif';\n\nconst SelfDestruct = () => {\n\treturn (\n\t\t<div className=\"relax\">\n\t\t<img src={relax} alt=\"Just a second... :)\"/>\n\n\t\t</div>\n\n\t);\n\n};\n\nexport default SelfDestruct; ","import React from 'react'; \n\nconst Help = () => {\n\treturn (\n\t\t<div className=\"help\">\n\t\t\t<h1>Help is coming soon...</h1>\n\t\t</div>\n\t);\n}; \n\nexport default Help; ","import React, {Fragment} from 'react';\nimport PoemBuilder from './PoemBuilder';\nimport History from './History';\nimport Button from './Button';\nimport NavBar from './NavBar';\nimport WordBank from './WordBank';\nimport SelfDestruct from './SelfDestruct';\nimport Help from './Help';\n\nconst production  = 'https://poem-builder.herokuapp.com';\nconst development = 'http://localhost:5000';\nconst url_base = (process.env.REACT_APP_ENVIRONMENT === 'development' ? development : production);\n\nconst user_id =\"a\";\n\nclass Game extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props); \n\n\t\tthis.state = {\n\t\t\tuser: user_id,\n\t\t\tusers: [\"a\", \"b\"],\n\t\t\tcounter: 0,\n\t\t\tcurrentLine: 0, \n\t\t\tcurrentPoemIndex: 0, \n\t\t\thistory: null, \n\t\t\tactiveView: \"poemBuilder\", \n\t\t\tviews: {\n\t\t\t\t\"poemBuilder\": {\n\t\t\t\t\t\"name\": \"poemBuilder\",\n\t\t\t\t\t\"text\": \"Current Build\"\n\t\t\t\t},\n\t\t\t\t\"wordBank\": {\n\t\t\t\t\t\"name\": \"wordBank\", \n\t\t\t\t\t\"text\": \"Word Bank\"\n\t\t\t\t},\n\t\t\t\t\"help\": {\n\t\t\t\t\t\"name\": \"help\", \n\t\t\t\t\t\"text\": \"Help\"\n\t\t\t\t}, \n\t\t\t\t\"selfDestruct\": {\n\t\t\t\t\t\"name\": \"selfDestruct\",\n\t\t\t\t\t\"text\": \"Self Destruct\"\n\t\t\t\t},\n\t\t\t\t\"history\": {\n\t\t\t\t\t\"name\": \"history\",\n\t\t\t\t\t\"text\": \"My Poems\"\n\t\t\t\t},\n\t\t\t},\n\t\t\tdisplay: {\n\t\t\t\t\"history\": false, \n\t\t\t\t\"syllableUpdate\": false,\n\t\t\t\t\"definitionUpdate\": false,\n\t\t\t\t\"originalWordWarning\": false,\n\t\t\t},\n\t\t\tcriteria: {\n\t\t\t\tlineCount: 3,\n\t\t\t\tsyllableLimits: [5,7,5],\n\t\t\t\texample: [\"haikus are easy\", \"but sometimes they don't make sense\", \"refrigerator\"],\n\t\t\t},\n\t\t\tmap: new Map(), \n\t\t\tcurrentWord: null,\n\t\t\tsyllableCounts: [0,0,0],\n\t\t};\n\t};\n\n\tasync componentWillMount() {\n\t\tconsole.log(`componentDidMount`);\n\t\tconst url = `${url_base}/wordAPI/poem/${this.state.user}`;\n\t\tconsole.log(url);\n\t\tconst response = await fetch(url, {\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json',\n\t\t\t}\n\t\t}).then((response) => response.json())\n\t\t.then((response) => {\n\t\t\tconsole.log(response); \n\t\t\tthis.setState({history: response, counter: response.length});\n\t\t});\t\t\n\t};\n\n\ttoggleUser = (user_id) => {\n\t\tthis.setState({user: user_id});\n\t};\n\n\taddWordToMap = (word, next) => {\n\t\tconst map = new Map(this.state.map); \n\t\tif (map.get(word) !== undefined) {\n\t\t\tnext(map.get(word)); // use cached word\n\t\t} else {\n\t\t\t// lookup word\n\t\t\tthis.lookupWord(word, (wordObject) => { \n\t\t\t\tthis.setState({map: this.state.map.set(word, {...wordObject}) }); \n\t\t\t\tnext(wordObject); \n\t\t\t});\n\t\t}\t\t\n\t};\n\n\ttoggleView = (view=\"\") => {\n\t\tif (!view || view === this.state.activeView || !(view in this.state.views) ) {\n\t\t\treturn; \n\t\t}\n\t\t// toggle history on/off\n\t\tif (view === this.state.views.history.name) {\n\t\t\tconst newDisplay = {...this.state.display, history: !this.state.display.history};\n\t\t\tthis.setState({display: newDisplay});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({activeView: view}); \n\t};\n\n\tgetCurrentPoem = () => {\n\n\t\treturn [...this.state.history].splice(this.state.currentPoemIndex, 1).find(e=>true);\n\t};\n\n\thandleTitleChange = (newTitle) => {\n\t\tthis.setState({history: this.state.history.map((poem, index) => {\n\t\t\tif (index === this.state.currentPoemIndex) {\n\t\t\t\treturn {...poem, title: newTitle}\n\t\t\t} else {\n\t\t\t\treturn poem; \n\t\t\t}\n\t\t})});\n\t};\n\n\thandleResetPoem = () => {\n\t\tconst history = this.state.history.map((item, i) => {\n\t\t\tif (i === this.state.currentPoemIndex) {\n\t\t\t\titem.linesEdit = item.lines; \n\t\t\t}\n\t\t\treturn item;  \n\t\t});\n\n\t\tthis.setState({ history: history });\n\t};\n\n\thandleSavePoem = () => {\n\t\tconst poem = this.getCurrentPoem(); \n\t\tif (!poem || !poem.lines){ return; }\n\t\t\n\t\t// replaces `lines` with `linesEdit`\n\t\tconst history = [...this.state.history].map((item, i) => {\n\t\t\tif (i === this.state.currentPoemIndex) {\n\t\t\t\titem.lines = item.linesEdit; \n\t\t\t\treturn item;\n\t\t\t} else {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t});\n\n\t\tthis.setState({ \n\t\t\thistory: [...history, this.createPoem()],\n\t\t\tcurrentPoemIndex: history.length,\n\t\t});\n\n\t\tvar url = `${url_base}/wordAPI/poem`;\t\t\n\t\tvar headers = {'Content-Type': 'application/json'};\n\t\tfetch(url, {\n\t\t\tmethod: 'post', \n\t\t\tbody: JSON.stringify(poem),\n\t\t\theaders: headers,\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(`result of fetch: ${JSON.stringify(res)}`);\n\t\t\t})\n\t\t\t.catch(err => err);\n\t};\t\n\n\thandlePoemClick = (e, lineNumber) => {\n\t\t// https://stackoverflow.com/questions/7563169/detect-which-word-has-been-clicked-on-within-a-text\n\t\tvar word = '';\n\t\tlet selection = window.getSelection().modify;\n\t\tif (selection && window.getSelection) {\n\t\t\t\t\t\t\n\t\t\t// save original cursor position\n\t\t\t// http://dimafeldman.com/js/maintain-cursor-position-after-changing-an-input-value-programatically/\n\t\t\tvar cursorStart = e.target.selectionStart,\n\t\t\t\tcursorEnd = e.target.selectionEnd;\n\t\t\t\n\t\t\tvar sel = window.getSelection();\n\t\t\tif (sel.isCollapsed) {\n\t\t\t\tsel.modify('move', 'forward', 'character');\n\t\t\t\tsel.modify('move', 'backward', 'word');\n\t\t\t\tsel.modify('extend', 'forward', 'word');\n\t\t\t\tword = sel.toString();\n\t\t\t\tsel.modify('move', 'forward', 'character'); // clear selection\n\t\t\t} else {\n\t\t\t\tword = sel.toString();\n\t\t\t}\n\t\t\t\n\t\t\t// restore cursor position\n\t\t\te.target.setSelectionRange(cursorStart, cursorEnd);\n\t\t}\n\t\t\n\t\tconst currentWord = this.state.map.get(word);\n\t\tif (currentWord === undefined){\n\t\t\tthis.updateCurrentWord(word);\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tcurrentWord: {...currentWord, edited:false},\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.setState({currentLine: lineNumber});\n\t};\n\n\thandlePoemKeyDown = (e) => {\n\t\tlet currentLine; \n\t\tswitch(e.key) {\n\t\t\tcase 'Enter':\n\t\t\t\te.preventDefault();\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowDown': \n\t\t\t\te.preventDefault(); \n\t\t\t\tcurrentLine = {...this.state.currentLine};\n\t\t\t\tif (++currentLine < this.state.lineCount) {\n\t\t\t\t\tthis.setState({ currentLine: currentLine });\n\t\t\t\t}\n\t\t\t\tbreak; \n\t\t\tcase 'ArrowUp': \n\t\t\t\te.preventDefault();\n\t\t\t\tcurrentLine = {...this.state.currentLine}; \n\t\t\t\tif (--currentLine >= 0) {\n\t\t\t\t\tthis.setState({ currentLine: currentLine });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\t};\n\n\thandlePoemLineChange = (e, lineNumber) => {\t\t\n\t\t// save original cursor position\n\t\tvar cursorStart = e.target.selectionStart,\n\t\t\tcursorEnd = e.target.selectionEnd;\t\t\n\t\t\n\t\tlet line = e.target.value;\n\n\t\t// line from start up to current cursor position\n\t\tvar leftOfCursor = e.target.value.slice(0,e.target.selectionEnd);\n\t\tvar words = leftOfCursor.split(\" \");\n\t\tvar currentWord = words[words.length-1];\n\n\t\tthis.updateCurrentWord(currentWord); // this is completing execution AFTER history has already been calculated\n\t\t\n\t\tlet lines;\n\t\tconst currentPoem = this.getCurrentPoem(); \n\t\tlet syllableCounts = this.state.syllableCounts; \n\t\tconst history = this.state.history.map((poem, index) => {\n\t\t\tif (index === this.state.currentPoemIndex) {\n\t\t\t\tlet currentLines = [...poem.linesEdit];\n\t\t\t\tif (!currentLines) { currentLines = this.createLines()}\n\t\t\t\tcurrentLines[lineNumber] = line;\n\t\t\t\tlines = currentLines; \n\t\t\t\tsyllableCounts = lines.map(line => this.getSyllableCount(line));\n\t\t\t\treturn {...poem, linesEdit: currentLines};\n\t\t\t}\n\t\t});\t\t\n\t\tthis.setState({ history: history, syllableCounts: syllableCounts });\n\n\t\tthis.validatePoem(currentPoem);\t\t\n\t\t\t\t\n\t\t// restore cursor position\n\t\te.target.setSelectionRange(cursorStart, cursorEnd); \n\t};\n\n\tcreateLines = (length=this.state.criteria.lineCount) => {\n\t\treturn new Array(length).fill(\"\"); \n\t}\n\n\thandlePoemClick = (e, lineNumber) => {\t\t\t\n\t\t// https://stackoverflow.com/questions/7563169/detect-which-word-has-been-clicked-on-within-a-text\n\t\tvar word = '';\n\t\tlet selection = window.getSelection().modify;\n\t\tif (selection && window.getSelection) {\n\t\t\t\t\t\t\n\t\t\t// save original cursor position\n\t\t\t// http://dimafeldman.com/js/maintain-cursor-position-after-changing-an-input-value-programatically/\n\t\t\tvar cursorStart = e.target.selectionStart,\n\t\t\t\tcursorEnd = e.target.selectionEnd;\n\t\t\t\n\t\t\tvar sel = window.getSelection();\n\t\t\tif (sel.isCollapsed) {\n\t\t\t\tsel.modify('move', 'forward', 'character');\n\t\t\t\tsel.modify('move', 'backward', 'word');\n\t\t\t\tsel.modify('extend', 'forward', 'word');\n\t\t\t\tword = sel.toString();\n\t\t\t\tsel.modify('move', 'forward', 'character'); // clear selection\n\t\t\t} else {\n\t\t\t\tword = sel.toString();\n\t\t\t}\n\t\t\t\n\t\t\t// restore cursor position\n\t\t\te.target.setSelectionRange(cursorStart, cursorEnd);\n\t\t}\n\t\t\n\t\tconst currentWord = this.state.map.get(word);\n\t\tif (currentWord === undefined){\n\t\t\tthis.updateCurrentWord(word);\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tcurrentWord: {...currentWord, edited:false},\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.setState({currentLine: lineNumber});\n\t};\n\n\thandleDefinitionChange = (e) => {\n\t\tif (e.target.value && e.target.value !== this.state.currentWord.activeEdit.edit.definition) {\n\t\t\tthis.setState({display: {...this.state.display, definitionUpdate: true}});\n\t\t} else {\n\t\t\tthis.setState({display: {...this.state.display, definitionUpdate: false}});\n\t\t}\n\n\t\tthis.setState({\n\t\t\tcurrentWord: {\n\t\t\t\t...this.state.currentWord, \n\t\t\t\tactiveEdit: {...this.state.currentWord.activeEdit, \n\t\t\t\t\tdefinition: true, \n\t\t\t\t\tedit: {...this.state.currentWord.activeEdit.edit, definition: e.target.value}}\n\t\t\t}\n\t\t});\n\t};\n\n\thandleSyllableChange = (e) => {\n\t\tif (e.target.value && e.target.value !== this.state.currentWord.syllables) {\n\t\t\tthis.setState({display: {...this.state.display, syllableUpdate: true}});\n\t\t} else {\n\t\t\tthis.setState({display: {...this.state.display, syllableUpdate: false}});\n\t\t}\n\t\t\n\t\tthis.setState({\n\t\t\tcurrentWord: {\n\t\t\t\t...this.state.currentWord, \n\t\t\t\tactiveEdit: {...this.state.currentWord.activeEdit, \n\t\t\t\t\tsyllables: true, \n\t\t\t\t\tedit: {...this.state.currentWord.activeEdit.edit, syllables: (e.target.value ? parseInt(e.target.value) : '')}\n\t\t\t\t}\n\t\t\t}\n\t\t});\t\t\n\t};\n\n\thandleStart = () => {\n\t\tconst newPoem = {...this.createPoem()}; \n\t\tif (this.state.history && this.state.history.length) { return; }\n\t\tconst history = [ newPoem ];\t \n\t\tthis.setState({ \n\t\t\thistory: history,\n\t\t\tcurrentPoemIndex: (history.length ? history.length-1 : 0),\n\t\t\tactiveView: this.state.views.poemBuilder.name\n\t\t});\n\t};\n\n\tlookupWord = (text, next, ...nextArgs) => {\n\t\tif (!text && !next) { console.log(`lookupWord --> word: ${text}`); return null; }\n\t\tvar url = `${url_base}/wordAPI/${text}`;\n\t\tfetch(url)\n\t\t\t.then(res => res.json())\n\t\t\t.then(res => {\n\t\t\t\tconst word = {\n\t\t\t\t\ttext: text,\n\t\t\t\t\tdefinition: res.definition,\n\t\t\t\t\tsyllables: res.syllables,\n\t\t\t\t\tedited: res.edited,\n\t\t\t\t\tactiveEdit: {\n\t\t\t\t\t\tedit: res,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnext(word, nextArgs);\n\t\t\t})\n\t\t\t.catch(err => err);\n\t};\n\n\trenderViews = () => {\n\t\tlet views = [(this.state.display.history ? this.getView(this.state.views.history.name) : null)];\n\t\tviews.push(this.getView(this.state.activeView)); \n\t\treturn views; \n\t};\n\n\tincrementCounter = () => {\n\t\t\n\t\tthis.setState({counter: this.state.counter+1});\n\t};\n\n\tcreatePoem = (count=null, title='Haiku') => {\n\t\tconst num = count ? count : this.state.counter;\n\t\tthis.incrementCounter();\n\t\tconst fullTitle = `${title} ${num}`;\n\t\tlet newPoem = {\n\t\t\tuser: this.state.user,\n\t\t\tid: `${this.state.user}_${num}`, \n\t\t\ttitle: fullTitle,\n\t\t\tlines: this.createLines(),\n\t\t\tlinesEdit: this.createLines(),\n\t\t\tlineCount: 3,\n\t\t\ttype: \"haiku\",\n\t\t\tvalid: false,\n\t\t};\n\t\treturn newPoem;\n\t};\n\n\tviewOriginalWord = (viewStatus) => {\n\t\tthis.setState({ display: {...this.state.display, originalWordWarning: viewStatus}});\n\t};\n\n\tcontinueUpdate = (displayWarning, updateSyllables=true, updateDefinition=true) => {\n\t\tif (!this.state.currentWord || !this.state.currentWord.activeEdit) { return; }\n\t\t\n\t\tconst currentWord = {...this.state.currentWord};\n\t\t\n\t\tconst newSyllableCount = (updateSyllables ? this.state.currentWord.activeEdit.edit.syllables : currentWord.syllables);\n\t\tconst newDefinition = (updateDefinition ? this.state.currentWord.activeEdit.edit.definition : currentWord.definition); \n\t\t\n\t\tconst newWord = {...currentWord, syllables: newSyllableCount, definition: newDefinition, original:{...currentWord}, edited: true, activeEdit: {...currentWord}};\n\t\tconst map = this.state.map;\n\t\tmap.delete(currentWord.text);\n\t\tmap.set(currentWord.text, newWord);\n\n\t\tlet valid;\n\t\tlet currentPoem;  \n\t\tconst history = this.state.history.map((poem, i) => {\n\t\t\tif (i === this.state.currentPoemIndex){\n\t\t\t\tcurrentPoem = this.getCurrentPoem(); \n\t\t\t\tvalid = this.validatePoem(poem.linesEdit);\n\t\t\t\treturn {...currentPoem, valid: valid}\n\t\t\t} else { \n\t\t\t\tcurrentPoem = poem;\n\t\t\t\treturn currentPoem;  \n\t\t\t}; \n\t\t});\n\n\t\tif (updateSyllables) {\n\t\t\tthis.cancelWarning(this.state.display.syllableUpdate, true, false); \n\t\t}\n\n\t\tif (updateDefinition) {\n\t\t\tthis.cancelWarning(this.state.display.definitionUpdate, false, true);\n\t\t}\n\n\t\tthis.updateSyllableCounts(currentPoem.linesEdit);\n\t\t\n\t\tthis.setState({\n\t\t\tmap: map,\n\t\t\tdisplaySyllableUpdate: false,\n\t\t\tcurrentWord: newWord,\n\t\t\thistory: history,\n\t\t});\n\t};\n\n\tcancelWarning = (displayWarning, resetSyllables=true, resetDefinition=true) => {\n\t\tif (this.state.currentWord && this.state.currentWord.activeEdit) {\n\t\t\tthis.updateCurrentWord(null, resetSyllables, resetDefinition);\n\t\t}\n\t\tthis.setState({displayWarning: false});\n\t};\n\n\t// If newWord=`null`, refresh currentWord by querying the db and overwriting local changes to syllable/definition. \n\t// Else, replace currentWord with the lookup results for newWord. \n\tupdateCurrentWord = (newWord=null, resetSyllables=true, resetDefinition=true) => {\n\t\tconst currentWord = {...this.state.currentWord};\n\t\tif (!currentWord && !newWord) { return; }\n\t\tif (!newWord) { \n\t\t\tnewWord = ('text' in currentWord) ? currentWord.text : '';\n\t\t} \n\t\tthis.addWordToMap(newWord, (wordObject) => {\n\t\t\tconst poem = this.getCurrentPoem(); \n\t\t\tconst lines = poem.linesEdit ? poem.linesEdit : poem.lines;\n\t\t\tconst syllableCounts = lines.map(line => this.getSyllableCount(line));\n\t\t\tthis.setState({\n\t\t\t\t\tcurrentWord: {...wordObject, \n\t\t\t\t\t\tactiveEdit: {\n\t\t\t\t\t\t\tsyllables: false,\n\t\t\t\t\t\t\tdefinition: false, \n\t\t\t\t\t\t\tedit: {...wordObject}\n\t\t\t\t\t\t}, \n\t\t\t\t\t\tsyllableCounts: syllableCounts}});\t\t\t\t\t\n\t\t}); \n\t};\n\n\tvalidatePoem = (poem) => {\n\t\tif (!poem) { return; }\n\t\tconst lines = poem.lines; \n\t\tif (!lines) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < lines.length; i++) {\n\t\t\tif (this.state.syllableCounts[i] !== this.state.criteria.syllableLimits[i]) {\n\t\t\t\tthis.setState({valid: false});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tthis.setState({valid:true});\n\t\treturn true; \n\t};\n\n\tgetSyllableCount = (line) => {\n\t\tif (!line) { return; }\n\t\treturn line.split(\" \").reduce((total, word) => {\n\t\t\t\tconst targetWord = this.state.map.get(word);\n\t\t\t\tif (!targetWord || !('syllables' in targetWord) || targetWord.syllables === undefined) { return total + 0; }\t\n\t\t\t\treturn total + targetWord.syllables;\n\t\t}, 0);\n\t};\n\n\ttogglePoemHistory = (index=0) => {\n\t\tif (index === this.state.currentPoemIndex) { return; }\n\t\tconst currentPoem = [...this.state.history][this.state.currentPoemIndex];\n\t\tif (!currentPoem) { return null; }\n\t\t//let lines = currentPoem.linesEdit ? currentPoem.linesEdit : currentPoem.lines;\n\t\t//if (!lines) { lines = this.createLines(); }\n\t\t//const newPoem = {...[...this.state.history][this.state.currentPoemIndex], lines: lines};\n\t\tlet history = [...this.state.history];\n\t\thistory.splice(this.state.currentPoemIndex,1,this.getCurrentPoem());\n\t\tthis.setState({\n\t\t\thistory: history,\n\t\t\tcurrentPoemIndex: index,\n\t\t});\n\t};\n\n\tgetView = (view=\"\") => {\n\t\tif (!view || !(view in this.state.views)) {\n\t\t\treturn; \n\t\t}\n\n\t\tconst views = {...this.state.views};\n\t\tconst poem = this.getCurrentPoem();\n\t\tif (!poem) { return; }\n\t\tconsole.log(`current poem: ${JSON.stringify(poem)}`);\n\t\tlet lines = poem.linesEdit ? poem.linesEdit : poem.lines;\n\t\tif (!lines) { lines = this.createLines()} \n\n\t\tconst currentWord = this.state.currentWord ? (this.state.currentWord.activeEdit ? this.state.currentWord.activeEdit.edit : null) : null; \n\t\t\n\t\tconst filteredHistory = this.state.history ? this.state.history.filter((item) => item.user === this.state.user) : null;\n\n\t\tswitch(view) {\n\t\t\tcase views.poemBuilder.name:\n\t\t\t\treturn (<PoemBuilder\n\t\t\t\t\tpoem={poem}\n\t\t\t\t\tsyllableCounts={this.state.syllableCounts}\n\t\t\t\t\tmap={this.state.map}\n\t\t\t\t\tcriteria={this.state.criteria}\n\t\t\t\t\thandleKeyDown={this.handlePoemKeyDown}\n\t\t\t\t\thandleClick={this.handlePoemClick}\n\t\t\t\t\thandleLineChange={this.handlePoemLineChange}\n\t\t\t\t\tcurrentLine={this.state.currentLine}\n\t\t\t\t\thandleSavePoem={this.handleSavePoem}\n\t\t\t\t\thandleTitleChange={this.handleTitleChange}\n\t\t\t\t\thandleDefinitionChange={this.handleDefinitionChange}\n\t\t\t\t\thandleSyllableChange={this.handleSyllableChange}\n\t\t\t\t\thandleResetPoem={this.handleResetPoem}\n\t\t\t\t\tcurrentWord={currentWord}\n\t\t\t\t\tdisplayDefinitionUpdate={this.state.display.definitionUpdate}\n\t\t\t\t\tdisplaySyllableUpdate={this.state.display.syllableUpdate}\n\t\t\t\t\tcontinueDefinitionUpdate={() => this.continueUpdate(this.state.display.definitionUpdate, false, true)}\n\t\t\t\t\tcontinueSyllableUpdate={() => this.continueUpdate(this.state.display.syllableUpdate, true, false)}\n\t\t\t\t\tcancelDefinitionUpdate={() => this.cancelWarning(this.state.display.definitionUpdate, false, true)}\n\t\t\t\t\tcancelSyllableUpdate={() => this.cancelWarning(this.state.display.syllableUpdate, true, false)}\n\t\t\t\t\tviewOriginalWord={this.viewOriginalWord}\n\t\t\t\t\tdisplayOriginalWord={this.state.display.originalWordWarning}\n\t\t\t\t/>); \n\t\t\t\tbreak; \n\t\t\tcase views.wordBank.name: \n\t\t\t\tconst words = Object.keys(this.state.map).map(item => this.state.map.get(item));\n\t\t\t\treturn <WordBank words={words} />;\n\t\t\t\tbreak;\n\t\t\tcase views.help.name: \n\t\t\t\treturn <Help />;\n\t\t\t\tbreak; \n\t\t\tcase views.selfDestruct.name: \n\t\t\t\treturn <SelfDestruct />; // \"relax... screen, game, photo, gif, etc\" \n\t\t\t\tbreak;  \n\t\t\tcase views.history.name:\n\t\t\t\treturn <History \n\t\t\t\t\thistory={filteredHistory} \n\t\t\t\t\tcurrentPoemIndex={this.state.currentPoemIndex} \n\t\t\t\t\ttogglePoemHistory={this.togglePoemHistory}\n\t\t\t\t/>;\n\t\t\t\tbreak; \n\t\t}\n\t};\n\n\trender() {\t\n\t\tconst buttons = Object.keys(this.state.views).map(item => {\n\t\t\treturn {\n\t\t\t\t\"name\": item,\n\t\t\t\t\"text\": this.state.views[item].text\n\t\t\t};\n\t\t});\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\n\t\t\t{this.state.activeView && this.state.history && this.state.history.length?\n\t\t\t\t<Fragment>\n\t\t\t\t\t<NavBar\n\t\t\t\t\t\tbuttons={buttons}\n\t\t\t\t\t\tselectedButton={this.state.activeView}\n\t\t\t\t\t\tdisplayHistory={this.state.display.history}\n\t\t\t\t\t\thandleClick={this.toggleView}\n\t\t\t\t\t/>\n\t\t\t\t\t{this.renderViews(this.state.activeView)}\n\t\t\t\t</Fragment>\n\t\t\t\t:\n\t\t\t\t<Button \n\t\t\t\t\tbuttonStyle=\"startButton\"\n\t\t\t\t\thandleClick={this.handleStart}\n\t\t\t\t\tvalue=\"Build!\"\n\t\t\t\t/>\n\t\t\t}\n\t\t\t\n\t\t\t</Fragment>\n\t\t);\n\t};\t\n};\n\nexport default Game; ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Game from './components/Game';\n\n// ========================================\n\nReactDOM.render(\n\t<Game/>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}