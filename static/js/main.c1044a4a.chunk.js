(this.webpackJsonpbldr=this.webpackJsonpbldr||[]).push([[0],{106:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(32),o=a.n(c),s=a(17),i=(a(106),a(174)),u=a(173),d=a(172),m=a(175),p=a(176),f=a(80),b=a.n(f),v=function(){var e=[{name:"bldr",text:"bldr",url:""},{name:"help",text:"Help",url:"/help"},{name:"selfDestruct",text:"Self Destruct",url:"/relax"},{name:"myPoems",text:"My Poems",url:"/history"},{name:"user",text:"by ".concat("\ud83c\udf0e"),url:"/user"}];return l.a.createElement(d.a,{sx:{flexGrow:1}},l.a.createElement(i.a,{position:"fixed",className:"nav",style:{backgroundColor:"#34060D"}},l.a.createElement(m.a,null,l.a.createElement(p.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2}},l.a.createElement(b.a,null)),e.map((function(e,t){return l.a.createElement(u.a,{href:e.url,style:{color:"white"}},e.text)})))))},h=a(81),y=a.n(h),E=function(){return l.a.createElement("div",{className:"relax"},l.a.createElement("img",{src:y.a,alt:"Just a second... :)"}))},g=function(){return l.a.createElement("div",{className:"help"},l.a.createElement("h3",null,"Sometimes you have to \ud83c\udf73..."))},j=a(49),w=a(19),O=a(4),x=a(18),k=a.n(x),S=a(29),C=a(22),N=a(36),P=a(84),W="http://localhost:5000",I=["body"],L=a(111);function A(e){return T.apply(this,arguments)}function T(){return(T=Object(S.a)(k.a.mark((function e(t){var a,n,r,l,c,o,s,i=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:{},n=a.body,r=Object(P.a)(a,I),t=L.resolve(W,t),l={"Content-Type":"application/json"},c=Object(N.a)(Object(N.a)({method:n?"POST":"GET"},r),{},{headers:Object(N.a)(Object(N.a)({},l),r.headers)}),n&&(c.body=JSON.stringify(n)),e.prev=5,e.next=8,window.fetch(t,c);case 8:return s=e.sent,e.next=11,s.json();case 11:if(o=e.sent,!s.ok){e.next=14;break}return e.abrupt("return",o);case 14:throw new Error(s.statusText);case 17:return e.prev=17,e.t0=e.catch(5),e.abrupt("return",Promise.reject(e.t0.message?e.t0.message:o));case 20:case"end":return e.stop()}}),e,null,[[5,17]])})))).apply(this,arguments)}A.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return A(e,Object(N.a)(Object(N.a)({},t),{},{method:"GET"}))},A.post=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return A(e,Object(N.a)(Object(N.a)({},a),{},{body:t}))};var U,F=Object(C.b)("poems/addPoem",function(){var e=Object(S.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/wordAPI/poem/",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R=Object(C.b)("poems/fetchPoems",Object(S.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t="a"),e.next=3,A.get("wordAPI/poem/".concat(t));case 3:if(!(a=e.sent).length){e.next=8;break}return e.abrupt("return",a);case 8:return e.abrupt("return",[{activePoem:{user:t,title:"Title here...",lines:["haikues are easy","but sometimes they don't make sense","refrigerator"],lineCount:3,valid:!0,syllableCounts:[5,7,5],syllableLimits:[5,7,5],date:"10/10/2022",reactions:[0,0,0,0,0],archived:!1},userId:t}]);case 9:case"end":return e.stop()}}),e)})))),D=Object(C.b)("poems/fetchActivePoem",Object(S.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t="a"),e.next=3,A.get("wordAPI/poem/".concat(t));case 3:if(!(a=e.sent).length){e.next=8;break}return e.abrupt("return",a[0]);case 8:return e.abrupt("return",{user:t,title:"Title here...",lines:["haikus are easy","but sometimes they don't make sense","refrigerator"],linesEdit:["haikus are easy","but sometimes they don't make sense","refrigerator"],lineCount:3,valid:!0,syllableCounts:[5,7,5],syllableLimits:[5,7,5],date:null,reactions:[0,0,0,0,0],archived:!1});case 9:case"end":return e.stop()}}),e)})))),B=Object(C.b)("poems/fetchPoemById",function(){var e=Object(S.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a="a"),e.next=3,A.get("wordAPI/poem/".concat(a));case 3:if(!(n=e.sent).length){e.next=8;break}return e.abrupt("return",n.find((function(e){return e.id===t})));case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),M=Object(C.c)({name:"poems",initialState:{activePoem:null,poems:[],listStatus:"idle",listError:null,activePoemStatus:"idle",activePoemError:null},reducers:{poemAdded:{reducer:function(e,t){e.poems.push(t.payload)},prepare:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[5,7,5],r=[0,0,0],l=["haikus are easy","but sometimes they don't make sense","refrigerator"],c={1:0,2:0,3:0,4:0,5:0},o=!1,s=Object(C.d)();return e||(e=""),t||(t=["","",""]),a||(a="Poem ".concat(s)),{payload:{id:s,date:(new Date).toISOString(),user:e,title:a,lines:t,valid:o,syllableLimits:n,syllableCounts:r,placeholders:l,reactions:c}}}},poemUpdated:function(e,t){var a=t.payload,n=a.id,r=a.title,l=a.lines,c=e.poems.find((function(e){return e.id===n}));c&&(c.title=r,c.lines=l),F(c)},poemReset:function(e,t){var a=t.payload,n=e.poems.find((function(e){return e.id===a}));n&&(n.syllableCounts=[0,0,0],n.lines=["","",""],n.valid=!1)},reactionAdded:function(e,t){var a=t.payload,n=a.poemId,r=a.reaction,l=e.poems.find((function(e){return e.id===n}));l&&l.reactions[r]++}},extraReducers:(n={},Object(O.a)(n,R.pending,(function(e,t){e.listStatus="loading"})),Object(O.a)(n,R.fulfilled,(function(e,t){e.listStatus="succeeded",e.poems=e.poems.concat(t.payload)})),Object(O.a)(n,R.rejected,(function(e,t){e.listStatus="failed",e.listError=t.error.message})),Object(O.a)(n,F.fulfilled,(function(e,t){var a=e.poems.map((function(e){return e.id})).indexOf(t.payload.id);~a&&e.poems.splice(a,1),e.poems.push(t.payload),e.activePoem=t.payload})),Object(O.a)(n,D.fulfilled,(function(e,t){t.payload?(e.activePoem=t.payload,e.activePoemStatus="succeeded"):F(t.payload)})),Object(O.a)(n,B.fulfilled,(function(e,t){e.activePoem=t.payload,e.activePoemStatus="succeeded"})),n)}),J=M.actions,G=J.poemAdded,_=(J.poemUpdated,J.poemReset),z=J.reactionAdded,H=M.reducer,V=function(e){return e.poems.poems},q=function(e){var t=e.userId,a=Object(s.c)((function(e){return e.users.users.find((function(e){return e.id===t}))}));return l.a.createElement("span",null,"by ",a?a.name:"Unknown author")},K=a(178),Q=a(169),X=function(e){var t=e.timestamp,a="";if(t){var n=Object(K.a)(t),r=Object(Q.a)(n);a="".concat(r," ago")}return l.a.createElement("span",{title:t},"\xa0 ",l.a.createElement("i",null,a))},Y=function(){var e,t=Object(s.b)(),a=Object(s.c)(V),n=Object(s.c)((function(e){return e.poems.listStatus})),c=Object(s.c)((function(e){return e.poems.error}));return Object(r.useEffect)((function(){"idle"===n&&t(R())}),[n,t]),"loading"===n?e=l.a.createElement("div",{className:"loader"},"Loading"):"succeeded"===n?e=a.filter((function(e){return!e.archived})).map((function(e){return l.a.createElement("article",{key:e.id},l.a.createElement("h3",null,e.title),l.a.createElement(q,{userId:e.user}),l.a.createElement(X,{timestamp:e.date}),e.lines.map((function(t,a){return l.a.createElement("p",{key:"".concat(e.id,"_").concat(a)},t)})),l.a.createElement(j.b,{to:"/poems/".concat(e.id)},"View Poem"))})):"failed"===n&&(e=l.a.createElement("div",null,c)),l.a.createElement("section",null,l.a.createElement("h2",null,"My Poems"),e)},Z=a(20),$=a(15),ee={currentWord:{word:"poem",definition:null,syllables:null},words:{},status:"idle",error:null},te=Object(C.b)("currentWord/fetchWord",function(){var e=Object(S.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("wordAPI/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=(Object(C.b)("currentWord/fetchWordMap",function(){var e=Object(S.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("map/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(C.c)({name:"words",initialState:ee,reducers:{currentWordUpdated:function(e,t){e.currentWord.word=t.payload,e.currentWord.syllables=0,e.currentWord.definition="",e.status="idle",te(t.payload)},wordAdded:{reducer:function(e,t){e.words[t.payload.word]=t.payload},prepare:function(e){return{payload:{word:e,original:e,updated:!1}}}},wordUpdated:function(e,t){var a=t.payload,n=a.word,r=a.definition,l=a.syllables,c=e.words[n];c&&(c.definition=r,c.syllables=l,c.updated=!0),e.words[n]=c}},extraReducers:(U={},Object(O.a)(U,te.pending,(function(e,t){e.status="loading"})),Object(O.a)(U,te.fulfilled,(function(e,t){e.status="succeeded",e.currentWord.word=e.currentWord.word,e.currentWord.syllables=t.payload.syllables,e.currentWord.definition=t.payload.definition,e.words[e.currentWord.word]=e.currentWord})),Object(O.a)(U,te.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),U)})),ne=ae.actions,re=ne.currentWordUpdated,le=(ne.wordAdded,ne.wordUpdated,ae.reducer),ce=a(179),oe=a(180),se=a(167),ie=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.words.currentWord})),a=Object(s.c)((function(e){return e.words.status})),n=Object(s.c)((function(e){return e.words.error}));"idle"===a&&t.word&&e(te(t.word));var r=t?t.syllables:0;return l.a.createElement(ce.a,{variant:"outlined",style:{backgroundColor:"#204B5C",width:"600px"}},l.a.createElement(oe.a,null,l.a.createElement("div",{className:"currentWord"},l.a.createElement("h1",{className:"currentWordDisplay"},t?t.word:""),l.a.createElement("span",{className:"currentWordSyllables"},"loading"===a?l.a.createElement("div",{className:"loader"},"Loading"):l.a.createElement(l.a.Fragment,null,l.a.createElement(se.a,{className:"currentWordSyllableCount",value:r}),l.a.createElement("span",{className:"currentWordSyllableText"}," syllable".concat(r>1||0===r?"s":""))),"failed"===a?l.a.createElement("div",null,n):null),null,"loading"===a?l.a.createElement("div",{className:"loader"},"Loading"):l.a.createElement(se.a,{multiline:!0,maxRows:"4",className:"currentDefinition",value:t?t.definition:""}),null,null)))},ue=a(168),de=function(e){var t,a=e.timestamp,n="";return a&&(t=Object(K.a)(a),n=Object(ue.a)(t,"MM/dd/yyyy hh:mm aaaa")),l.a.createElement("span",{title:a},"\xa0 ",l.a.createElement("i",null,n))},me={1:"\ud83e\udd76",2:"\ud83d\ude28",3:"\ud83d\ude30",4:"\ud83d\ude31",5:"\ud83e\udd2f"},pe=function(e){var t=e.poem,a=Object(s.b)();if(!t||!t.reactions)return null;var n=Object.entries(me).map((function(e){var n=Object($.a)(e,2),r=n[0],c=[n[1],l.a.createElement("br",null),t.reactions[r]];return l.a.createElement(u.a,{key:r,type:"button",className:"muted-button reaction-button",onClick:function(){return a(z({poemId:t.id,reaction:r}))}},c)}));return l.a.createElement("div",{className:"reactionButtons"},n)},fe=function(e){var t=e.match,a=void 0===t?null:t,n=Object(s.b)(),c=(Object(w.g)(),Object(s.c)((function(e){return e.poems.activePoem})));c||(c={user:"a",title:"Title here...",lines:["haikues are easy","but sometimes they don't make sense","refrigerator"],lineCount:3,valid:!0,syllableCounts:[5,7,5],syllableLimits:[5,7,5],date:"10/10/2022",reactions:[0,0,0,0,0],archived:!1});Object(s.c)((function(e){return e.poems.poems}));var o,i,d=Object(s.c)((function(e){return e.poems.activePoemStatus})),m=Object(s.c)((function(e){return e.poems.error})),p=Object(r.useState)(c?c.title:""),f=Object($.a)(p,2),b=f[0],v=f[1],h=Object(r.useState)(c?c.lines:["","",""]),y=Object($.a)(h,2),E=y[0],g=y[1],j=c&&c.syllableLimits?c.syllableLimits:[5,7,5],O=c&&c.syllableCounts?c.syllableCounts:[0,0,0],x=c&&c.placeholders?c.placeholders:["haikus are easy","but sometimes they don't make sense","refrigerator"],N=c&&c.id?c.id:N,P=c&&c.reactions?c.reactions:{1:0,2:0,3:0,4:0,5:0},W=c&&c.date?c.date:"",I=Object(s.c)((function(e){return e.users.activeUserId})),L=Object(s.c)((function(e){return e.words.words})),A=Object(r.useState)("idle"),T=Object($.a)(A,2),U=T[0],R=T[1],M=!1;a?o=a.params.poemId:(M=!0,o=null),Object(r.useEffect)((function(){"idle"===d&&M?n(D()).then((function(e){g(e.payload.lines),v(e.payload.title)})):"idle"===d&&n(B(o)).then((function(e){g(e.payload.lines),v(e.payload.title)}))}));var J=function(){var e=Object(S.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!([N,b,E,I,j,O,P,x].every(Boolean)&&"idle"===U)){e.next=20;break}return e.prev=2,R("pending"),e.next=6,n(F({id:N,title:b,lines:E,user:I,syllableCounts:O,syllableLimits:j,date:W,reactions:P}));case 6:t=e.sent,Object(C.e)(t),v(""),g(["","",""]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Failed to save the post: ",e.t0);case 15:return e.prev=15,R("idle"),e.finish(15);case 18:e.next=21;break;case 20:console.log("cannot save");case 21:n(G(I));case 22:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(S.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!([N,b,E,I,j,O,P,x].every(Boolean)&&"idle"===U)){e.next=18;break}return e.prev=2,R("pending"),e.next=6,n(F({id:N,title:b,lines:E,user:I,syllableCounts:O,syllableLimits:j,date:W,reactions:P}));case 6:t=e.sent,Object(C.e)(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Failed to save the post: ",e.t0);case 13:return e.prev=13,R("idle"),e.finish(13);case 16:e.next=19;break;case 18:console.log("cannot save");case 19:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),H=function(e){n(re(e))};return"loading"===d?i=l.a.createElement("div",{className:"loader"},"Loading"):"succeeded"===d?(j=c&&c.syllableLimits?c.syllableLimits:j,x=c&&c.placeholders?c.placeholders:x,N=c&&c.id?c.id:N,P=c&&c.reactions?c.reactions:P,W=c&&c.date?c.date:W,(O=c&&c.syllableCounts?c.syllableCounts:O).length||(O=E.map((function(e){return e?e.split(" ").reduce((function(e,t){return e+(L[t]?L[t].syllables:0)}),0):0}))),i=l.a.createElement(l.a.Fragment,null,l.a.createElement(ce.a,{style:{backgroundColor:"#3C6271",width:"600px"},variant:"outlined"},l.a.createElement(oe.a,null,l.a.createElement("div",{className:"poem"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"title"},l.a.createElement("span",null,l.a.createElement("span",{className:"underline"},"title"),":"),l.a.createElement(se.a,{className:"title",value:b,onChange:function(e){return v(e.target.value)}})),l.a.createElement("h2",{title:b,onChange:function(e){return v(e.target.value)}}),l.a.createElement(u.a,{onClick:z},"Save"),l.a.createElement(u.a,{onClick:J},"Save & Create New"),l.a.createElement(u.a,{onClick:function(){n(_(o))}},"Reset")),l.a.createElement(q,{userId:c?c.user:null}),l.a.createElement(de,{timestamp:c?c.date:""}),l.a.createElement(pe,{poem:c}),l.a.createElement("div",{className:"lines"},E?E.map((function(e,t){return l.a.createElement("span",{key:"line_".concat(t),className:"line"},l.a.createElement(se.a,{key:t,value:e,onChange:function(e){return function(e,t){var a=e.target.value,n=Object(Z.a)(E);n[t]=a,g(n);var r=e.target.selectionStart,l=e.target.selectionEnd,c=(e.target.value,e.target.value.slice(0,e.target.selectionEnd).split(" ")),o=c[c.length-1];H(o),e.target.setSelectionRange(r,l)}(e,t)},onClick:function(e){return function(e,t){var a="";if(window.getSelection().modify&&window.getSelection){var n=e.target.selectionStart,r=e.target.selectionEnd,l=window.getSelection();l.isCollapsed?(l.modify("move","forward","character"),l.modify("move","backward","word"),l.modify("extend","forward","word"),a=l.toString(),l.modify("move","forward","character")):a=l.toString(),e.target.setSelectionRange(n,r)}H(a)}(e)},placeholder:x?x[t]:""}),l.a.createElement("h4",{key:"counter_".concat(t),className:"counter"}," ",O[t]," / ",j[t]))})):null,l.a.createElement("hr",{className:"divider"}))))),l.a.createElement(ie,null))):"failed"===d&&(i=l.a.createElement("div",null,m)),l.a.createElement(l.a.Fragment,null,i)},be=function(e){var t=e.lines&&e.lines.length?e.lines.map((function(e,t){return l.a.createElement("span",{key:t},l.a.createElement("span",null,e),l.a.createElement("br",null))})):null;return e.lines&&e.lines.length>0?l.a.createElement("span",{onClick:e.handleClick},t):null},ve=function(e){return l.a.createElement(be,{lines:null})};var he=function(){return l.a.createElement(j.a,null,l.a.createElement(v,null),l.a.createElement("div",{className:"App"},l.a.createElement(w.d,null,l.a.createElement(w.b,{exact:!0,path:"/",render:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(fe,null))}}),l.a.createElement(w.b,{exact:!0,path:"/history",render:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Y,null))}}),l.a.createElement(w.b,{exact:!0,path:"/relax",component:E}),l.a.createElement(w.b,{exact:"/help",path:"/help",component:g}),l.a.createElement(w.b,{exact:!0,path:"/user",render:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ve,null))}}),l.a.createElement(w.b,{exact:!0,path:"/poems/:poemId",component:fe}),l.a.createElement(w.a,{to:"/"}))))},ye=Object(C.c)({name:"users",initialState:{users:[{id:"a",name:"\ud83c\udf0e"},{id:"b",name:"JT"},{id:"c",name:"DC"}],activeUserId:"a"},reducers:{}}).reducer,Ee=Object(C.a)({reducer:{poems:H,users:ye,words:le}});o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,{store:Ee},l.a.createElement(he,null))),document.getElementById("root"))},81:function(e,t,a){e.exports=a.p+"static/media/relax.8074cc44.gif"},98:function(e,t,a){e.exports=a(123)}},[[98,1,2]]]);
//# sourceMappingURL=main.c1044a4a.chunk.js.map